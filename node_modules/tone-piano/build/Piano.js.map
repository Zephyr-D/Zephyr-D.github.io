{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///build/Piano.js","webpack:///webpack/bootstrap a4be64d1521ce6d7a23a","webpack:///external \"tone\"","webpack:///./Salamander.js","webpack:///./Util.js","webpack:///./PianoBase.js","webpack:///./Harmonics.js","webpack:///./Notes.js","webpack:///./Pedal.js","webpack:///./Release.js","webpack:///./Piano.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Util","default","getReleasesUrl","midi","Math","random","toFixed","getHarmonicsUrl","midiToNote","replace","getNotesUrl","vel","noteToMidi","note","_tone","Frequency","toMidi","toNote","midiToFrequencyRatio","mod","_tone2","intervalToFrequencyRatio","createSource","buffer","BufferSource","randomBetween","low","high","undefined","obj","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","PianoBase","_AudioNode","vol","arguments","_this","getPrototypeOf","createInsOuts","volume","gainToDb","output","gain","set","dbToGain","AudioNode","_interopRequireDefault","_Salamander","_Salamander2","_PianoBase2","_PianoBase3","harmonics","Harmonics","_PianoBase","range","lowerIndex","findIndex","upperIndex","notes","slice","_samples","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","time","velocity","_sampler","triggerAttack","baseUrl","_this2","Promise","success","fail","Sampler","connect","release","Notes","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","push","Array","isArray","velocitiesMap","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","velocities","slicedNotes","_samplers","_activeNotes","Map","forEach","has","source","stop","delete","velPos","roundedVel","round","diff","_midiToFrequencyRatio","_midiToFrequencyRatio2","ratio","_hasNote","_getNote","playbackRate","start","promises","prom","Buffers","all","Pedal","_downTime","Infinity","_currentSound","_buffers","up","down","dir","_squash","_playSample","Release","Piano","_Pedal","_Pedal2","_Notes","_Harmonics","_Harmonics2","_Release","_Release2","options","defaults","_loaded","_heldNotes","_sustainedNotes","_notes","_pedal","_harmonics","_release","url","load","then","loaded","toSeconds","isDown","_this3","t","clear","now","isString","prevNote","holdTime","prevVel","dampenGain","max","pow","log","param"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,SACA,kBAAAC,gBAAAC,IACAD,QAAA,QAAAJ,GACA,gBAAAC,SACAA,QAAA,MAAAD,EAAAG,QAAA,SAEAJ,EAAA,MAAAC,EAAAD,EAAA,OACCO,KAAA,SAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAT,OAGA,IAAAC,GAAAS,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAZ,WAUA,OANAO,GAAAE,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAW,GAAA,EAGAX,EAAAD,QAvBA,GAAAU,KA+DA,OAnCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAG,EAAA,SAAAK,GAA2C,MAAAA,IAG3CR,EAAAS,EAAA,SAAAjB,EAAAkB,EAAAC,GACAX,EAAAY,EAAApB,EAAAkB,IACAG,OAAAC,eAAAtB,EAAAkB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAX,EAAAkB,EAAA,SAAAzB,GACA,GAAAkB,GAAAlB,KAAA0B,WACA,WAA2B,MAAA1B,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAO,GAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAY,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDrB,EAAAwB,EAAA,GAGAxB,IAAAyB,EAAA,KDgBM,SAAUhC,EAAQD,GEhFxBC,EAAAD,QAAAM,GFsFM,SAAUL,EAAQD,EAASQ,GAEjC,YAGAa,QAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GG5FR,IAAAkB,GAAA1B,EAAA,EHiGAR,GAAQmC,SG7FPC,eAFc,SAECC,GACd,aAAaA,EAAO,IAApB,SAA6C,IAAdC,KAAKC,UAAcC,QAAQ,IAG3DC,gBANc,SAMEJ,GACf,eAAe,EAAAH,EAAAQ,YAAWL,GAAMM,QAAQ,IAAK,KAA7C,SAAwE,IAAdL,KAAKC,UAAcC,QAAQ,IAGtFI,YAVc,SAUFP,EAAMQ,GACjB,OAAU,EAAAX,EAAAQ,YAAWL,GAAMM,QAAQ,IAAK,KAAxC,IAAgDE,EAAhD,SAA0E,IAAdP,KAAKC,UAAcC,QAAQ,MHkGnF,SAAUvC,EAAQD,EAASQ,GAEjC,YI/GA,SAASsC,GAAWC,GACnB,OAAO,EAAAC,EAAAC,WAAUF,GAAMG,SAGxB,QAASR,GAAWL,GACnB,OAAO,EAAAW,EAAAC,WAAUZ,EAAM,QAAQc,SAGhC,QAASC,GAAqBf,GAC7B,GAAIgB,GAAMhB,EAAO,CACjB,OAAY,KAARgB,GACKhB,EAAO,EAAGiB,EAAAnB,QAAKoB,yBAAyB,IAC9B,IAARF,GACFhB,EAAO,EAAGiB,EAAAnB,QAAKoB,0BAA0B,KAEzClB,EAAM,GAIhB,QAASmB,GAAaC,GACrB,MAAO,IAAAT,GAAAU,aAAiBD,GAGzB,QAASE,GAAcC,EAAKC,GAC3B,MAAOvB,MAAKC,UAAYsB,EAAOD,GAAOA,EJ0FvCvC,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQ2D,cAAgB3D,EAAQoD,qBAAuBpD,EAAQwD,aAAexD,EAAQ8C,WAAa9C,EAAQ0C,eAAaoB,EIvHxH,IAAAd,GAAAxC,EAAA,GJ2HI8C,EAEJ,SAAgCS,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,IAFnDf,EA+BpChD,GI7HQ0C,aJ8HR1C,EI9HoB8C,aJ+HpB9C,EI/HgCwD,eJgIhCxD,EIhI8CoD,uBJiI9CpD,EIjIoE2D,iBJqI9D,SAAU1D,EAAQD,EAASQ,GAEjC,YAeA,SAASwD,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAhBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MK3KhiBlB,EAAAxC,EAAA,GL+KI8C,EAEJ,SAAgCS,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,IAFnDf,GK7KfwC,ELuLL,SAAUC,GKtLzB,QAAAD,KAAqB,GAATE,GAASC,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAH,CAAG3B,GAAA3D,KAAAmF,EAAA,IAAAI,GAAAxB,EAAA/D,MAAAmF,EAAAV,WAAAzD,OAAAwE,eAAAL,IAAA3E,KAAAR,MAAA,OAEpBuF,GAAKE,cAAc,EAAG,GAEtBF,EAAKG,OAASL,EAJME,ELgNrB,MAzBArB,GAAUiB,EAAWC,GAerBV,EAAaS,IACZH,IAAK,SACL5D,IAAK,WKjML,MAAO6B,GAAAnB,QAAK6D,SAAS3F,KAAK4F,OAAOC,KAAKlF,QLoMtCmF,IAAK,SKlMKT,GACVrF,KAAK4F,OAAOC,KAAKlF,MAAQsC,EAAAnB,QAAKiE,SAASV,OLsMjCF,GACNxC,EAAMqD,UAERrG,GAAQmC,QKpNaqD,GLwNf,SAAUvF,EAAQD,EAASQ,GAEjC,YAqBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAxBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MMnOhiBqC,EAAA/F,EAAA,GNuOIgG,EAAeF,EAAuBC,GMtO1CE,EAAAjG,EAAA,GN0OIkG,EAAcJ,EAAuBG,GMzOzCvE,EAAA1B,EAAA,GACAwC,EAAAxC,EAAA,GAGMmG,GAAa,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEtFC,ENoPL,SAAUC,GMlPzB,QAAAD,KAA4B,GAAhBE,GAAgBnB,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,IAAT,GAAI,IAAK3B,GAAA3D,KAAAuG,EAAA,IAAAhB,GAAAxB,EAAA/D,MAAAuG,EAAA9B,WAAAzD,OAAAwE,eAAAe,IAAA/F,KAAAR,OAGrB0G,EAAaJ,EAAUK,UAAU,SAACjE,GAAD,MAAUA,IAAQ+D,EAAM,KAC3DG,EAAaN,EAAUK,UAAU,SAACjE,GAAD,MAAUA,IAAQ+D,EAAM,IAC7DG,IAA6B,IAAhBA,EAAoBA,EAAaN,EAAUxB,OAAS8B,CAEjE,IAAMC,GAAQP,EAAUQ,MAAMJ,EAAYE,EAE1CrB,GAAKwB,WATsB,IAAAC,IAAA,EAAAC,GAAA,EAAAC,MAAAzD,EAAA,KAW3B,OAAA0D,GAAAC,EAAcP,EAAdQ,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAoB,IAAX3F,GAAW8F,EAAAxG,KACnB4E,GAAKwB,SAAS1F,GAAK8E,EAAArE,QAAWM,gBAAgBf,IAZpB,MAAAoG,GAAAR,GAAA,EAAAC,EAAAO,EAAA,aAAAT,GAAAI,EAAAM,QAAAN,EAAAM,SAAA,WAAAT,EAAA,KAAAC,IAAA,MAAA3B,GNqT5B,MAlEArB,GAAUqC,EAAWC,GAiDrB9B,EAAa6B,IACZvB,IAAK,QACLrE,MAAO,SMtRF+B,EAAMiF,EAAMC,GACjB5H,KAAK6H,SAASC,eAAc,EAAAjG,EAAAQ,YAAWK,GAAOiF,EAAMC,GAAW,EAAA/F,EAAAyB,eAAc,GAAK,ONyRlF0B,IAAK,OACLrE,MAAO,SMvRHoH,GAAQ,GAAAC,GAAAhI,IACZ,OAAO,IAAIiI,SAAQ,SAACC,EAASC,GAC5BH,EAAKH,SAAW,GAAAlF,GAAAyF,QAAYJ,EAAKjB,SAAUmB,EAASH,GAASM,QAAQL,EAAKpC,QAC1EoC,EAAKH,SAASS,QAAU,QN8RnB/B,GACNF,EAAYvE,QAEdnC,GAAQmC,QM1TayE,GN8Tf,SAAU3G,EAAQD,EAASQ,GAEjC,YA0BA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GA7BjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQ4I,UAAQ9E,EAEhB,IAAI+E,GAAiB,WAAc,QAASC,GAAcC,EAAKpI,GAAK,GAAIqI,MAAeC,GAAK,EAAUC,GAAK,EAAWC,MAAKrF,EAAW,KAAM,IAAK,GAAiCsF,GAA7BC,EAAKN,EAAIrB,OAAOC,cAAmBsB,GAAMG,EAAKC,EAAGzB,QAAQC,QAAoBmB,EAAKM,KAAKF,EAAGpI,QAAYL,GAAKqI,EAAK7D,SAAWxE,GAA3DsI,GAAK,IAAoE,MAAOnB,GAAOoB,GAAK,EAAMC,EAAKrB,EAAO,QAAU,KAAWmB,GAAMI,EAAW,QAAGA,EAAW,SAAO,QAAU,GAAIH,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAKpI,GAAK,GAAI4I,MAAMC,QAAQT,GAAQ,MAAOA,EAAY,IAAIrB,OAAOC,WAAYtG,QAAO0H,GAAQ,MAAOD,GAAcC,EAAKpI,EAAa,MAAM,IAAIwD,WAAU,4DAEllBY,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MOlVhiBlB,EAAAxC,EAAA,GACA+F,GPqVaD,EAAuBtD,GOrVpCxC,EAAA,IPyVIgG,EAAeF,EAAuBC,GOxV1CE,EAAAjG,EAAA,GP4VIkG,EAAcJ,EAAuBG,GO3VzCvE,EAAA1B,EAAA,GAKMiJ,GACLC,GAAM,GACNC,GAAM,EAAG,IACTC,GAAM,EAAG,EAAG,IACZC,GAAM,EAAG,EAAG,GAAI,IAChBC,GAAM,EAAG,EAAG,EAAG,GAAI,IACnBC,GAAM,EAAG,EAAG,EAAG,GAAI,GAAI,IACvBC,GAAM,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IAC1BC,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,IAC7BC,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IACjCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IACpCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IACxCC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,IAC3CC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAC/CC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAClDC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACtDC,IAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,KAGpDvD,GAAS,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IP2WzHlH,GOtWC4I,MPsWe,SAAU/B,GOpWrC,QAAA+B,KAA0C,GAA9B9B,GAA8BnB,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,IAAvB,GAAI,KAAM+E,EAAa/E,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAF,CAAE3B,GAAA3D,KAAAuI,EAAA,IAAAhD,GAAAxB,EAAA/D,MAAAuI,EAAA9D,WAAAzD,OAAAwE,eAAA+C,IAAA/H,KAAAR,OAGnC0G,EAAaG,EAAMF,UAAU,SAACjE,GAAD,MAAUA,IAAQ+D,EAAM,KACvDG,EAAaC,EAAMF,UAAU,SAACjE,GAAD,MAAUA,IAAQ+D,EAAM,IACzDG,IAA6B,IAAhBA,EAAoBA,EAAaC,EAAM/B,OAAS8B,EAAa,CAE1E,IAAM0D,GAAczD,EAAMC,MAAMJ,EAAYE,EAPH,OASzCrB,GAAKgF,UAAYnB,EAAciB,GAAYvD,QAE3CvB,EAAKiF,aAAe,GAAIC,KAExBlF,EAAKgF,UAAUG,QAAQ,SAAClI,EAAKlC,GAC5BiF,EAAKgF,UAAUjK,MACfgK,EAAYI,QAAQ,SAAChI,GACpB6C,EAAKgF,UAAUjK,GAAGoC,GAAQyD,EAAArE,QAAWS,YAAYG,EAAMF,OAhBhB+C,EPsc1C,MAjGArB,GAAUqE,EAAO/B,GAiCjB9B,EAAa6D,IACZvD,IAAK,WACLrE,MAAO,SOnXC+B,EAAMkF,GACd,MAAO5H,MAAKuK,UAAU7I,eAAekG,IAAa5H,KAAKuK,UAAU3C,GAAU+C,IAAIjI,MPsX/EsC,IAAK,WACLrE,MAAO,SOpXC+B,EAAMkF,GACd,MAAO5H,MAAKuK,UAAU3C,GAAUxG,IAAIsB,MPuXpCsC,IAAK,OACLrE,MAAO,SOrXH+B,EAAMiF,EAAMC,GAEZ5H,KAAKwK,aAAaG,IAAIjI,KACzB1C,KAAKwK,aAAapJ,IAAIsB,GAAMgI,QAAQ,SAAAE,GAEnCA,EAAOC,KAAKlD,EADI,WAGjB3H,KAAKwK,aAAaM,OAAOpI,OPyX1BsC,IAAK,QACLrE,MAAO,SOtXF+B,EAAMiF,EAAMC,GAEjB,GAAMmD,GAASnD,GAAY5H,KAAKuK,UAAUzF,OAAS,GAC7CkG,EAAa/I,KAAKgJ,MAAMF,GACxBG,EAAOF,EAAaD,EACpBlF,EAAO,EAAW,GAAPqF,EALSC,GAON,EAAAtJ,EAAAkB,sBAAqBL,GAPf0I,EAAA5C,EAAA2C,EAAA,GAOrBnJ,EAPqBoJ,EAAA,GAOfC,EAPeD,EAAA,EAS1B,IAAIpL,KAAKsL,SAAStJ,EAAMgJ,GAAY,CACnC,GAAMJ,IAAS,EAAA/I,EAAAsB,cAAanD,KAAKuL,SAASvJ,EAAMgJ,GAChDJ,GAAOY,aAAa7K,MAAQ0K,EAC5BT,EAAOvC,QAAQrI,KAAK4F,QACpBgF,EAAOa,MAAM9D,EAAM,MAAGlE,GAAWoC,EAAM,GAElC7F,KAAKwK,aAAaG,IAAIjI,IAC1B1C,KAAKwK,aAAa1E,IAAIpD,MAEvB1C,KAAKwK,aAAapJ,IAAIsB,GAAMuG,KAAK2B,OP6XlC5F,IAAK,OACLrE,MAAO,SO1XHoH,GAAQ,GAAAC,GAAAhI,KACN0L,IAON,OANA1L,MAAKuK,UAAUG,QAAQ,SAAChH,EAAKpD,GAC5B,GAAIqL,GAAO,GAAI1D,SAAQ,SAACC,GACvBF,EAAKuC,UAAUjK,GAAK,GAAAqC,GAAAiJ,QAAYlI,EAAKwE,EAASH,IAE/C2D,GAASzC,KAAK0C,KAER1D,QAAQ4D,IAAIH,OPgYbnD,GACNlC,EAAYvE,UAIR,SAAUlC,EAAQD,EAASQ,GAEjC,YAuBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GA1BjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MQtfhiBuC,EAAAjG,EAAA,GR0fIkG,EAAcJ,EAAuBG,GQzfzCF,EAAA/F,EAAA,GACA0B,GR4fmBoE,EAAuBC,GQ5f1C/F,EAAA,IACAwC,EAAAxC,EAAA,GAEqB2L,GR+fR7F,EAAuBtD,GAUxB,SAAU6D,GQxgBrB,QAAAsF,KAAanI,EAAA3D,KAAA8L,EAAA,IAAAvG,GAAAxB,EAAA/D,MAAA8L,EAAArH,WAAAzD,OAAAwE,eAAAsG,IAAAtL,KAAAR,MAAA,OAGZuF,GAAKwG,UAAYC,IAEjBzG,EAAK0G,cAAgB,KAErB1G,EAAK2G,SAAW,KAPJ3G,ER4kBb,MAnEArB,GAAU4H,EAAOtF,GAejB9B,EAAaoH,IACZ9G,IAAK,OACLrE,MAAO,SQhhBHoH,GAAQ,GAAAC,GAAAhI,IACZ,OAAO,IAAIiI,SAAQ,SAACC,GACnBF,EAAKkE,SAAW,GAAAvJ,GAAAiJ,SACfO,GAAK,cACLC,KAAO,eACLlE,EAASH,QR2hBb/C,IAAK,UACLrE,MAAO,SQrhBAgH,GACH3H,KAAKiM,eACRjM,KAAKiM,cAAcpB,KAAKlD,EAAM,IAE/B3H,KAAKiM,cAAgB,QRwhBrBjH,IAAK,cACLrE,MAAO,SQthBIgH,EAAM0E,GACjBrM,KAAKiM,eAAgB,EAAApK,EAAAsB,cAAanD,KAAKkM,SAAS9K,IAAIiL,IACpDrM,KAAKiM,cAAc5D,QAAQrI,KAAK4F,QAAQ6F,MAAM9D,GAAM,EAAA9F,EAAAyB,eAAc,EAAG,QAAMG,GAAW,IAAM,EAAA5B,EAAAyB,eAAc,GAAK,GAAI,QRyhBnH0B,IAAK,OACLrE,MAAO,SQvhBHgH,GACJ3H,KAAKsM,QAAQ3E,GACb3H,KAAK+L,UAAYpE,EACjB3H,KAAKuM,YAAY5E,EAAM,WR0hBvB3C,IAAK,KACLrE,MAAO,SQxhBLgH,GACF3H,KAAKsM,QAAQ3E,GACb3H,KAAK+L,UAAYC,IACjBhM,KAAKuM,YAAY5E,EAAM,SR2hBvB3C,IAAK,SACLrE,MAAO,SQzhBDgH,GACN,MAAOA,GAAO3H,KAAK+L,cR6hBbD,GACNzF,EAAYvE,SAEdnC,GAAQmC,QQhlBagK,GRolBf,SAAUlM,EAAQD,EAASQ,GAEjC,YAqBA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAxBjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,GAGR,IAAI+D,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MSlmBhiBqC,EAAA/F,EAAA,GTsmBIgG,EAAeF,EAAuBC,GSrmB1CE,EAAAjG,EAAA,GTymBIkG,EAAcJ,EAAuBG,GSxmBzCvE,EAAA1B,EAAA,GACAwC,EAAAxC,EAAA,GAEqBqM,ETmnBP,SAAUhG,GSjnBvB,QAAAgG,GAAY/F,GAAM9C,EAAA3D,KAAAwM,EAAA,IAAAjH,GAAAxB,EAAA/D,MAAAwM,EAAA/H,WAAAzD,OAAAwE,eAAAgH,IAAAhM,KAAAR,MAGjBuF,GAAK2G,WACL,KAAK,GAAI5L,GAAImG,EAAM,GAAInG,GAAKmG,EAAM,GAAInG,IACrCiF,EAAK2G,SAAS5L,GAAK6F,EAAArE,QAAWC,eAAezB,EAL7B,OAAAiF,GTqpBlB,MAnCArB,GAAUsI,EAAShG,GAcnB9B,EAAa8H,IACZxH,IAAK,OACLrE,MAAO,SSznBHoH,GAAQ,GAAAC,GAAAhI,IACZ,OAAO,IAAIiI,SAAQ,SAACC,GACnBF,EAAKkE,SAAW,GAAAvJ,GAAAiJ,QAAY5D,EAAKkE,SAAUhE,EAASH,QT+nBrD/C,IAAK,QACLrE,MAAO,SS5nBF+B,EAAMiF,EAAMC,GACjB,GAAI5H,KAAKkM,SAASvB,IAAIjI,GAAM,CAC3B,GAAIkI,IAAS,EAAA/I,EAAAsB,cAAanD,KAAKkM,SAAS9K,IAAIsB,IAAO2F,QAAQrI,KAAK4F,OAEhEgC,KAAY,EAAA/F,EAAAyB,eAAc,GAAK,GAC/BsH,EAAOa,MAAM9D,EAAM,MAAGlE,GAAW,IAAOmE,EAAU,QTioB7C4E,GACNnG,EAAYvE,QAEdnC,GAAQmC,QS1pBa0K,GT8pBf,SAAU5M,EAAQD,EAASQ,GAEjC,YAgCA,SAAS8F,GAAuBvC,GAAO,MAAOA,IAAOA,EAAIpC,WAAaoC,GAAQ5B,QAAS4B,GAEvF,QAASC,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMxD,GAAQ,IAAKwD,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOzD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BwD,EAAPxD,EAElO,QAAS0D,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAAS1C,UAAYT,OAAOqD,OAAOD,GAAcA,EAAW3C,WAAa6C,aAAe3D,MAAOwD,EAAUhD,YAAY,EAAOoD,UAAU,EAAMrD,cAAc,KAAekD,IAAYpD,OAAOwD,eAAiBxD,OAAOwD,eAAeL,EAAUC,GAAcD,EAASM,UAAYL,GAnCjepD,OAAOC,eAAetB,EAAS,cAC9BgB,OAAO,IAERhB,EAAQ8M,UAAQhJ,EAEhB,IAAIiB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIvE,GAAI,EAAGA,EAAIuE,EAAMC,OAAQxE,IAAK,CAAE,GAAIyE,GAAaF,EAAMvE,EAAIyE,GAAW5D,WAAa4D,EAAW5D,aAAc,EAAO4D,EAAW7D,cAAe,EAAU,SAAW6D,KAAYA,EAAWR,UAAW,GAAMvD,OAAOC,eAAe2D,EAAQG,EAAWC,IAAKD,IAAiB,MAAO,UAAUlB,EAAaoB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBd,EAAYpC,UAAWwD,GAAiBC,GAAaP,EAAiBd,EAAaqB,GAAqBrB,MU7qBhiBlB,EAAAxC,EAAA,GVirBI8C,EAASgD,EAAuBtD,GUhrBpC+J,EAAAvM,EAAA,GVorBIwM,EAAU1G,EAAuByG,GUnrBrCE,EAAAzM,EAAA,GACA0M,EAAA1M,EAAA,GVwrBI2M,EAAc7G,EAAuB4G,GUvrBzCE,EAAA5M,EAAA,GV2rBI6M,EAAY/G,EAAuB8G,GU1rBvC7G,EAAA/F,EAAA,EV8rBmB8F,GAAuBC,GAc9BvG,EUtsBC8M,MVssBe,SAAUrH,GUpsBrC,QAAAqH,KAAa9I,EAAA3D,KAAAyM,EAEZ,IAAMQ,GAAUhK,EAAAnB,QAAKoL,SAAS5H,WAAY,QAAS,eAClD+E,WAAa,EACb5D,OAAS,GAAI,KACb6B,SAAU,IALC/C,EAAAxB,EAAA/D,MAAAyM,EAAAhI,WAAAzD,OAAAwE,eAAAiH,IAAAjM,KAAAR,MAAA,OASZuF,GAAKE,cAAc,EAAG,GAEtBF,EAAK4H,SAAU,EAEf5H,EAAK6H,WAAa,GAAI3C,KAEtBlF,EAAK8H,gBAAkB,GAAI5C,KAE3BlF,EAAK+H,OAAS,GAAAV,GAAArE,MAAU0E,EAAQxG,MAAOwG,EAAQ5C,YAAYhC,QAAQ9C,EAAKK,QAExEL,EAAKgI,QAAS,GAAAZ,GAAA7K,SAAYuG,QAAQ9C,EAAKK,QAEnCqH,EAAQ3E,UACX/C,EAAKiI,WAAa,GAAAV,GAAAhL,QAAcmL,EAAQxG,OAAO4B,QAAQ9C,EAAKK,QAE5DL,EAAKkI,SAAW,GAAAT,GAAAlL,QAAYmL,EAAQxG,OAAO4B,QAAQ9C,EAAKK,SAxB7CL,EV86Bb,MAzOArB,GAAUuI,EAAOrH,GAwCjBV,EAAa+H,IACZzH,IAAK,OACLrE,MAAO,SU9sBH+M,GAAI,GAAA1F,GAAAhI,KACF0L,GAAY1L,KAAKsN,OAAOK,KAAKD,GAAM1N,KAAKuN,OAAOI,KAAKD,GAO1D,OANI1N,MAAKwN,YACR9B,EAASzC,KAAKjJ,KAAKwN,WAAWG,KAAKD,IAEhC1N,KAAKyN,UACR/B,EAASzC,KAAKjJ,KAAKyN,SAASE,KAAKD,IAE3BzF,QAAQ4D,IAAIH,GAAUkC,KAAK,WACjC5F,EAAKmF,SAAU,OV2tBhBnI,IAAK,YASLrE,MAAO,SUjtBEgH,GAOT,MANI3H,MAAK6N,SACRlG,EAAO3H,KAAK8N,UAAUnG,GACjB3H,KAAKuN,OAAOQ,OAAOpG,IACvB3H,KAAKuN,OAAOnB,KAAKzE,IAGZ3H,QV2tBPgF,IAAK,UACLrE,MAAO,SUptBAgH,GAAK,GAAAqG,GAAAhO,IAcZ,OAbIA,MAAK6N,SACRlG,EAAO3H,KAAK8N,UAAUnG,GAClB3H,KAAKuN,OAAOQ,OAAOpG,KACtB3H,KAAKuN,OAAOpB,GAAGxE,GAEf3H,KAAKqN,gBAAgB3C,QAAQ,SAACuD,EAAGvL,GAC3BsL,EAAKZ,WAAWzC,IAAIjI,IACxBsL,EAAKV,OAAOzC,KAAKnI,EAAMiF,KAGzB3H,KAAKqN,gBAAgBa,UAGhBlO,QVmuBPgF,IAAK,UACLrE,MAAO,SUztBA+B,GAAoC,GAA9BiF,GAA8BrC,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAzBrC,EAAAnB,QAAKqM,MAAOvG,EAAatC,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAJ,EAevC,OAdItF,MAAK6N,SACRlG,EAAO3H,KAAK8N,UAAUnG,GAElB1E,EAAAnB,QAAKsM,SAAS1L,KACjBA,EAAOT,KAAKgJ,OAAM,EAAAtI,EAAAC,WAAUF,GAAMG,WAG9B7C,KAAKoN,WAAWzC,IAAIjI,KAExB1C,KAAKoN,WAAWtH,IAAIpD,GAAOiF,OAAMC,aAEjC5H,KAAKsN,OAAO7B,MAAM/I,EAAMiF,EAAMC,KAGzB5H,QVuuBPgF,IAAK,QACLrE,MAAO,SU/tBF+B,GAAoC,GAA9BiF,GAA8BrC,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAzBrC,EAAAnB,QAAKqM,MAAOvG,EAAatC,UAAAR,OAAA,OAAArB,KAAA6B,UAAA,GAAAA,UAAA,GAAJ,EACrC,IAAItF,KAAK6N,SACRlG,EAAO3H,KAAK8N,UAAUnG,GAElB1E,EAAAnB,QAAKsM,SAAS1L,KACjBA,EAAOT,KAAKgJ,OAAM,EAAAtI,EAAAC,WAAUF,GAAMG,WAG/B7C,KAAKoN,WAAWzC,IAAIjI,IAAM,CAE7B,GAAM2L,GAAWrO,KAAKoN,WAAWhM,IAAIsB,EACrC1C,MAAKoN,WAAWtC,OAAOpI,GAEnB1C,KAAKyN,UACRzN,KAAKyN,SAAShC,MAAM/I,EAAMiF,EAAMC,EAIjC,IAAM0G,GAAW3G,EAAO0G,EAAS1G,KAC3B4G,EAAUF,EAASzG,SACrB4G,EAAc,GAAIvM,KAAKwM,IAAIH,EAAU,IAAQC,EAAU3G,CAC3D4G,GAAavM,KAAKyM,IAAIzM,KAAK0M,IAAI1M,KAAKwM,IAAID,EAAY,IAAK,GAAK,EAE1DxO,KAAKuN,OAAOQ,OAAOpG,GACjB3H,KAAKqN,gBAAgB1C,IAAIjI,IAC7B1C,KAAKqN,gBAAgBvH,IAAIpD,EAAMiF,IAGhC3H,KAAKsN,OAAOzC,KAAKnI,EAAMiF,EAAMC,GAEzB5H,KAAKwN,YACRxN,KAAKwN,WAAW/B,MAAM/I,EAAMiF,EAAM6G,IAKtC,MAAOxO,SVgvBPgF,IAAK,YACLrE,MAAO,SUruBEiO,EAAOvJ,GAChB,OAAOuJ,GACN,IAAK,OACJ5O,KAAKsN,OAAO5H,OAASL,CACrB,MACD,KAAK,QACJrF,KAAKuN,OAAO7H,OAASL,CACrB,MACD,KAAK,UACArF,KAAKyN,WACRzN,KAAKyN,SAAS/H,OAASL,EAExB,MACD,KAAK,YACArF,KAAKwN,aACRxN,KAAKwN,WAAW9H,OAASL,GAI5B,MAAOrF,SVwuBPgF,IAAK,SACL5D,IAAK,WUr3BL,MAAOpB,MAAKmN,YV03BNV,GACN9J,EAAMqD","file":"./build/Piano.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"tone\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"tone\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Piano\"] = factory(require(\"tone\"));\n\telse\n\t\troot[\"Piano\"] = factory(root[\"tone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _Util = __webpack_require__(2);\n\nexports.default = {\n\tgetReleasesUrl: function getReleasesUrl(midi) {\n\t\treturn 'rel' + (midi - 20) + '.mp3?' + (Math.random() * 100).toFixed(0);\n\t},\n\tgetHarmonicsUrl: function getHarmonicsUrl(midi) {\n\t\treturn 'harmL' + (0, _Util.midiToNote)(midi).replace('#', 's') + '.mp3?' + (Math.random() * 100).toFixed(0);\n\t},\n\tgetNotesUrl: function getNotesUrl(midi, vel) {\n\t\treturn (0, _Util.midiToNote)(midi).replace('#', 's') + 'v' + vel + '.mp3?' + (Math.random() * 100).toFixed(0);\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.randomBetween = exports.midiToFrequencyRatio = exports.createSource = exports.noteToMidi = exports.midiToNote = undefined;\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction noteToMidi(note) {\n\treturn (0, _tone.Frequency)(note).toMidi();\n}\n\nfunction midiToNote(midi) {\n\treturn (0, _tone.Frequency)(midi, 'midi').toNote();\n}\n\nfunction midiToFrequencyRatio(midi) {\n\tvar mod = midi % 3;\n\tif (mod === 1) {\n\t\treturn [midi - 1, _tone2.default.intervalToFrequencyRatio(1)];\n\t} else if (mod === 2) {\n\t\treturn [midi + 1, _tone2.default.intervalToFrequencyRatio(-1)];\n\t} else {\n\t\treturn [midi, 1];\n\t}\n}\n\nfunction createSource(buffer) {\n\treturn new _tone.BufferSource(buffer);\n}\n\nfunction randomBetween(low, high) {\n\treturn Math.random() * (high - low) + low;\n}\n\nexports.midiToNote = midiToNote;\nexports.noteToMidi = noteToMidi;\nexports.createSource = createSource;\nexports.midiToFrequencyRatio = midiToFrequencyRatio;\nexports.randomBetween = randomBetween;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PianoBase = function (_AudioNode) {\n\t_inherits(PianoBase, _AudioNode);\n\n\tfunction PianoBase() {\n\t\tvar vol = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n\t\t_classCallCheck(this, PianoBase);\n\n\t\tvar _this = _possibleConstructorReturn(this, (PianoBase.__proto__ || Object.getPrototypeOf(PianoBase)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this.volume = vol;\n\t\treturn _this;\n\t}\n\n\t_createClass(PianoBase, [{\n\t\tkey: 'volume',\n\t\tget: function get() {\n\t\t\treturn _tone2.default.gainToDb(this.output.gain.value);\n\t\t},\n\t\tset: function set(vol) {\n\t\t\tthis.output.gain.value = _tone2.default.dbToGain(vol);\n\t\t}\n\t}]);\n\n\treturn PianoBase;\n}(_tone.AudioNode);\n\nexports.default = PianoBase;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// the harmonics notes that Salamander has\nvar harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87];\n\nvar Harmonics = function (_PianoBase) {\n\t_inherits(Harmonics, _PianoBase);\n\n\tfunction Harmonics() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\n\t\t_classCallCheck(this, Harmonics);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Harmonics.__proto__ || Object.getPrototypeOf(Harmonics)).call(this));\n\n\t\tvar lowerIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = harmonics.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex;\n\n\t\tvar notes = harmonics.slice(lowerIndex, upperIndex);\n\n\t\t_this._samples = {};\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = notes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar n = _step.value;\n\n\t\t\t\t_this._samples[n] = _Salamander2.default.getHarmonicsUrl(n);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn _this;\n\t}\n\n\t_createClass(Harmonics, [{\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\tthis._sampler.triggerAttack((0, _Util.midiToNote)(note), time, velocity * (0, _Util.randomBetween)(0.5, 1));\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success, fail) {\n\t\t\t\t_this2._sampler = new _tone.Sampler(_this2._samples, success, baseUrl).connect(_this2.output);\n\t\t\t\t_this2._sampler.release = 1;\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Harmonics;\n}(_PianoBase3.default);\n\nexports.default = Harmonics;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Notes = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Maps velocity depths to Salamander velocities\n */\nvar velocitiesMap = {\n\t1: [8],\n\t2: [6, 12],\n\t3: [1, 8, 15],\n\t4: [1, 5, 10, 15],\n\t5: [1, 4, 8, 12, 16],\n\t6: [1, 3, 7, 10, 13, 16],\n\t7: [1, 3, 6, 9, 11, 13, 16],\n\t8: [1, 3, 5, 7, 9, 11, 13, 15],\n\t9: [1, 3, 5, 7, 9, 11, 13, 15, 16],\n\t10: [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\n\t11: [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\n\t12: [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\n\t13: [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\n\t14: [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\n\t15: [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\n\t16: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]\n};\n\nvar notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108];\n\n/**\n *  Manages all of the hammered string sounds\n */\n\nvar Notes = exports.Notes = function (_PianoBase) {\n\t_inherits(Notes, _PianoBase);\n\n\tfunction Notes() {\n\t\tvar range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [21, 108];\n\t\tvar velocities = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n\t\t_classCallCheck(this, Notes);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Notes.__proto__ || Object.getPrototypeOf(Notes)).call(this));\n\n\t\tvar lowerIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[0];\n\t\t});\n\t\tvar upperIndex = notes.findIndex(function (note) {\n\t\t\treturn note >= range[1];\n\t\t});\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1;\n\n\t\tvar slicedNotes = notes.slice(lowerIndex, upperIndex);\n\n\t\t_this._samplers = velocitiesMap[velocities].slice();\n\n\t\t_this._activeNotes = new Map();\n\n\t\t_this._samplers.forEach(function (vel, i) {\n\t\t\t_this._samplers[i] = {};\n\t\t\tslicedNotes.forEach(function (note) {\n\t\t\t\t_this._samplers[i][note] = _Salamander2.default.getNotesUrl(note, vel);\n\t\t\t});\n\t\t});\n\t\treturn _this;\n\t}\n\n\t_createClass(Notes, [{\n\t\tkey: '_hasNote',\n\t\tvalue: function _hasNote(note, velocity) {\n\t\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note);\n\t\t}\n\t}, {\n\t\tkey: '_getNote',\n\t\tvalue: function _getNote(note, velocity) {\n\t\t\treturn this._samplers[velocity].get(note);\n\t\t}\n\t}, {\n\t\tkey: 'stop',\n\t\tvalue: function stop(note, time, velocity) {\n\t\t\t//stop all of the currently playing note\n\t\t\tif (this._activeNotes.has(note)) {\n\t\t\t\tthis._activeNotes.get(note).forEach(function (source) {\n\t\t\t\t\tvar release = 0.25;\n\t\t\t\t\tsource.stop(time + release, release);\n\t\t\t\t});\n\t\t\t\tthis._activeNotes.delete(note);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\n\t\t\tvar velPos = velocity * (this._samplers.length - 1);\n\t\t\tvar roundedVel = Math.round(velPos);\n\t\t\tvar diff = roundedVel - velPos;\n\t\t\tvar gain = 1 - diff * 0.5;\n\n\t\t\tvar _midiToFrequencyRatio = (0, _Util.midiToFrequencyRatio)(note),\n\t\t\t    _midiToFrequencyRatio2 = _slicedToArray(_midiToFrequencyRatio, 2),\n\t\t\t    midi = _midiToFrequencyRatio2[0],\n\t\t\t    ratio = _midiToFrequencyRatio2[1];\n\n\t\t\tif (this._hasNote(midi, roundedVel)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._getNote(midi, roundedVel));\n\t\t\t\tsource.playbackRate.value = ratio;\n\t\t\t\tsource.connect(this.output);\n\t\t\t\tsource.start(time, 0, undefined, gain, 0);\n\n\t\t\t\tif (!this._activeNotes.has(note)) {\n\t\t\t\t\tthis._activeNotes.set(note, []);\n\t\t\t\t}\n\t\t\t\tthis._activeNotes.get(note).push(source);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar promises = [];\n\t\t\tthis._samplers.forEach(function (obj, i) {\n\t\t\t\tvar prom = new Promise(function (success) {\n\t\t\t\t\t_this2._samplers[i] = new _tone.Buffers(obj, success, baseUrl);\n\t\t\t\t});\n\t\t\t\tpromises.push(prom);\n\t\t\t});\n\t\t\treturn Promise.all(promises);\n\t\t}\n\t}]);\n\n\treturn Notes;\n}(_PianoBase3.default);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Pedal = function (_PianoBase) {\n\t_inherits(Pedal, _PianoBase);\n\n\tfunction Pedal() {\n\t\t_classCallCheck(this, Pedal);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Pedal.__proto__ || Object.getPrototypeOf(Pedal)).call(this));\n\n\t\t_this._downTime = Infinity;\n\n\t\t_this._currentSound = null;\n\n\t\t_this._buffers = null;\n\t\treturn _this;\n\t}\n\n\t_createClass(Pedal, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers({\n\t\t\t\t\tup: 'pedalU1.mp3',\n\t\t\t\t\tdown: 'pedalD1.mp3'\n\t\t\t\t}, success, baseUrl);\n\t\t\t});\n\t\t}\n\n\t\t/**\n   *  Squash the current playing sound\n   */\n\n\t}, {\n\t\tkey: '_squash',\n\t\tvalue: function _squash(time) {\n\t\t\tif (this._currentSound) {\n\t\t\t\tthis._currentSound.stop(time, 0.1);\n\t\t\t}\n\t\t\tthis._currentSound = null;\n\t\t}\n\t}, {\n\t\tkey: '_playSample',\n\t\tvalue: function _playSample(time, dir) {\n\t\t\tthis._currentSound = (0, _Util.createSource)(this._buffers.get(dir));\n\t\t\tthis._currentSound.connect(this.output).start(time, (0, _Util.randomBetween)(0, 0.1), undefined, 0.2 * (0, _Util.randomBetween)(0.5, 1), 0.05);\n\t\t}\n\t}, {\n\t\tkey: 'down',\n\t\tvalue: function down(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = time;\n\t\t\tthis._playSample(time, 'down');\n\t\t}\n\t}, {\n\t\tkey: 'up',\n\t\tvalue: function up(time) {\n\t\t\tthis._squash(time);\n\t\t\tthis._downTime = Infinity;\n\t\t\tthis._playSample(time, 'up');\n\t\t}\n\t}, {\n\t\tkey: 'isDown',\n\t\tvalue: function isDown(time) {\n\t\t\treturn time > this._downTime;\n\t\t}\n\t}]);\n\n\treturn Pedal;\n}(_PianoBase3.default);\n\nexports.default = Pedal;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nvar _PianoBase2 = __webpack_require__(3);\n\nvar _PianoBase3 = _interopRequireDefault(_PianoBase2);\n\nvar _Util = __webpack_require__(2);\n\nvar _tone = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Release = function (_PianoBase) {\n\t_inherits(Release, _PianoBase);\n\n\tfunction Release(range) {\n\t\t_classCallCheck(this, Release);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Release.__proto__ || Object.getPrototypeOf(Release)).call(this));\n\n\t\t_this._buffers = {};\n\t\tfor (var i = range[0]; i <= range[1]; i++) {\n\t\t\t_this._buffers[i] = _Salamander2.default.getReleasesUrl(i);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t_createClass(Release, [{\n\t\tkey: 'load',\n\t\tvalue: function load(baseUrl) {\n\t\t\tvar _this2 = this;\n\n\t\t\treturn new Promise(function (success) {\n\t\t\t\t_this2._buffers = new _tone.Buffers(_this2._buffers, success, baseUrl);\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'start',\n\t\tvalue: function start(note, time, velocity) {\n\t\t\tif (this._buffers.has(note)) {\n\t\t\t\tvar source = (0, _Util.createSource)(this._buffers.get(note)).connect(this.output);\n\t\t\t\t//randomize the velocity slightly\n\t\t\t\tvelocity *= (0, _Util.randomBetween)(0.5, 1);\n\t\t\t\tsource.start(time, 0, undefined, 0.01 * velocity, 0);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Release;\n}(_PianoBase3.default);\n\nexports.default = Release;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Piano = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tone = __webpack_require__(0);\n\nvar _tone2 = _interopRequireDefault(_tone);\n\nvar _Pedal = __webpack_require__(6);\n\nvar _Pedal2 = _interopRequireDefault(_Pedal);\n\nvar _Notes = __webpack_require__(5);\n\nvar _Harmonics = __webpack_require__(4);\n\nvar _Harmonics2 = _interopRequireDefault(_Harmonics);\n\nvar _Release = __webpack_require__(7);\n\nvar _Release2 = _interopRequireDefault(_Release);\n\nvar _Salamander = __webpack_require__(1);\n\nvar _Salamander2 = _interopRequireDefault(_Salamander);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\n *  @extends {Tone}\n */\nvar Piano = exports.Piano = function (_AudioNode) {\n\t_inherits(Piano, _AudioNode);\n\n\tfunction Piano() {\n\t\t_classCallCheck(this, Piano);\n\n\t\tvar options = _tone2.default.defaults(arguments, [\"range\", \"velocities\"], {\n\t\t\tvelocities: 1,\n\t\t\trange: [21, 108],\n\t\t\trelease: true\n\t\t});\n\n\t\tvar _this = _possibleConstructorReturn(this, (Piano.__proto__ || Object.getPrototypeOf(Piano)).call(this));\n\n\t\t_this.createInsOuts(0, 1);\n\n\t\t_this._loaded = false;\n\n\t\t_this._heldNotes = new Map();\n\n\t\t_this._sustainedNotes = new Map();\n\n\t\t_this._notes = new _Notes.Notes(options.range, options.velocities).connect(_this.output);\n\n\t\t_this._pedal = new _Pedal2.default().connect(_this.output);\n\n\t\tif (options.release) {\n\t\t\t_this._harmonics = new _Harmonics2.default(options.range).connect(_this.output);\n\n\t\t\t_this._release = new _Release2.default(options.range).connect(_this.output);\n\t\t}\n\t\treturn _this;\n\t}\n\n\t/**\n  *  Load all the samples\n  *  @param  {String}  baseUrl  The url for the Salamander base folder\n  *  @return  {Promise}\n  */\n\n\n\t_createClass(Piano, [{\n\t\tkey: 'load',\n\t\tvalue: function load(url) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar promises = [this._notes.load(url), this._pedal.load(url)];\n\t\t\tif (this._harmonics) {\n\t\t\t\tpromises.push(this._harmonics.load(url));\n\t\t\t}\n\t\t\tif (this._release) {\n\t\t\t\tpromises.push(this._release.load(url));\n\t\t\t}\n\t\t\treturn Promise.all(promises).then(function () {\n\t\t\t\t_this2._loaded = true;\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * If all the samples are loaded or not\n   * @readOnly\n   * @type {Boolean}\n   */\n\n\t}, {\n\t\tkey: 'pedalDown',\n\n\n\t\t/**\n   *  Put the pedal down at the given time. Causes subsequent\n   *  notes and currently held notes to sustain.\n   *  @param  {Time}  time  The time the pedal should go down\n   *  @returns {Piano} this\n   */\n\t\tvalue: function pedalDown(time) {\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (!this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.down(time);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Put the pedal up. Dampens sustained notes\n   *  @param  {Time}  time  The time the pedal should go up\n   *  @returns {Piano} this\n   */\n\n\t}, {\n\t\tkey: 'pedalUp',\n\t\tvalue: function pedalUp(time) {\n\t\t\tvar _this3 = this;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\tthis._pedal.up(time);\n\t\t\t\t\t// dampen each of the notes\n\t\t\t\t\tthis._sustainedNotes.forEach(function (t, note) {\n\t\t\t\t\t\tif (!_this3._heldNotes.has(note)) {\n\t\t\t\t\t\t\t_this3._notes.stop(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis._sustainedNotes.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Play a note.\n   *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\n   *                                     to be MIDI\n   *  @param  {NormalRange}  velocity  The velocity to play the note\n   *  @param  {Time}  time      The time of the event\n   *  @return  {Piano}  this\n   */\n\n\t}, {\n\t\tkey: 'keyDown',\n\t\tvalue: function keyDown(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (!this._heldNotes.has(note)) {\n\t\t\t\t\t//record the start time and velocity\n\t\t\t\t\tthis._heldNotes.set(note, { time: time, velocity: velocity });\n\n\t\t\t\t\tthis._notes.start(note, time, velocity);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Release a held note.\n   *  @param  {String|Number}  note      The note to stop\n   *  @param  {Time}  time      The time of the event\n   *  @return  {Piano}  this\n   */\n\n\t}, {\n\t\tkey: 'keyUp',\n\t\tvalue: function keyUp(note) {\n\t\t\tvar time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _tone2.default.now();\n\t\t\tvar velocity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.8;\n\n\t\t\tif (this.loaded) {\n\t\t\t\ttime = this.toSeconds(time);\n\n\t\t\t\tif (_tone2.default.isString(note)) {\n\t\t\t\t\tnote = Math.round((0, _tone.Frequency)(note).toMidi());\n\t\t\t\t}\n\n\t\t\t\tif (this._heldNotes.has(note)) {\n\n\t\t\t\t\tvar prevNote = this._heldNotes.get(note);\n\t\t\t\t\tthis._heldNotes.delete(note);\n\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.start(note, time, velocity);\n\t\t\t\t\t}\n\n\t\t\t\t\t//compute the release velocity\n\t\t\t\t\tvar holdTime = time - prevNote.time;\n\t\t\t\t\tvar prevVel = prevNote.velocity;\n\t\t\t\t\tvar dampenGain = 0.5 / Math.max(holdTime, 0.1) + prevVel + velocity;\n\t\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2;\n\n\t\t\t\t\tif (this._pedal.isDown(time)) {\n\t\t\t\t\t\tif (!this._sustainedNotes.has(note)) {\n\t\t\t\t\t\t\tthis._sustainedNotes.set(note, time);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._notes.stop(note, time, velocity);\n\n\t\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   *  Set the volumes of each of the components\n   *  @param {String} param\n   *  @param {Decibels} vol\n   *  @return {Piano} this\n   *  @example\n   * //either as an string\n   * piano.setVolume('release', -10)\n   */\n\n\t}, {\n\t\tkey: 'setVolume',\n\t\tvalue: function setVolume(param, vol) {\n\t\t\tswitch (param) {\n\t\t\t\tcase 'note':\n\t\t\t\t\tthis._notes.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'pedal':\n\t\t\t\t\tthis._pedal.volume = vol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'release':\n\t\t\t\t\tif (this._release) {\n\t\t\t\t\t\tthis._release.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'harmonics':\n\t\t\t\t\tif (this._harmonics) {\n\t\t\t\t\t\tthis._harmonics.volume = vol;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}, {\n\t\tkey: 'loaded',\n\t\tget: function get() {\n\t\t\treturn this._loaded;\n\t\t}\n\t}]);\n\n\treturn Piano;\n}(_tone.AudioNode);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// build/Piano.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a4be64d1521ce6d7a23a","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tone\"\n// module id = 0\n// module chunks = 0","import {noteToMidi, midiToNote} from './Util'\n\nexport default {\n\n\tgetReleasesUrl(midi){\n\t\treturn `rel${midi - 20}.mp3?${(Math.random()*100).toFixed(0)}`\n\t},\n\n\tgetHarmonicsUrl(midi){\n\t\treturn `harmL${midiToNote(midi).replace('#', 's')}.mp3?${(Math.random()*100).toFixed(0)}`\n\t},\n\n\tgetNotesUrl(midi, vel){\n\t\treturn `${midiToNote(midi).replace('#', 's')}v${vel}.mp3?${(Math.random()*100).toFixed(0)}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Salamander.js","import Tone, { Frequency, BufferSource } from 'tone'\n\nfunction noteToMidi(note){\n\treturn Frequency(note).toMidi()\n}\n\nfunction midiToNote(midi){\n\treturn Frequency(midi, 'midi').toNote()\n}\n\nfunction midiToFrequencyRatio(midi){\n\tlet mod = midi % 3\n\tif (mod === 1){\n\t\treturn [midi - 1, Tone.intervalToFrequencyRatio(1)]\n\t} else if (mod === 2){\n\t\treturn [midi + 1, Tone.intervalToFrequencyRatio(-1)]\n\t} else {\n\t\treturn [midi, 1]\n\t}\n}\n\nfunction createSource(buffer){\n\treturn new BufferSource(buffer)\n}\n\nfunction randomBetween(low, high){\n\treturn Math.random() * (high - low) + low\n}\n\nexport {midiToNote, noteToMidi, createSource, midiToFrequencyRatio, randomBetween}\n\n\n\n// WEBPACK FOOTER //\n// ./Util.js","import Tone, {AudioNode} from 'tone'\n\nexport default class PianoBase extends AudioNode {\n\tconstructor(vol = 0) {\n\t\tsuper()\n\t\tthis.createInsOuts(0, 1)\n\n\t\tthis.volume = vol\n\t}\n\tget volume() {\n\t\treturn Tone.gainToDb(this.output.gain.value)\n\t}\n\tset volume(vol) {\n\t\tthis.output.gain.value = Tone.dbToGain(vol)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./PianoBase.js","import Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {noteToMidi, createSource, midiToFrequencyRatio, midiToNote, randomBetween} from './Util'\nimport { Buffers , Sampler, Frequency} from 'tone'\n\n// the harmonics notes that Salamander has\nconst harmonics = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87]\n\nexport default class Harmonics extends PianoBase {\n\n\tconstructor(range=[21, 108]){\n\t\tsuper()\n\n\t\tconst lowerIndex = harmonics.findIndex((note) => note >= range[0])\n\t\tlet upperIndex = harmonics.findIndex((note) => note >= range[1])\n\t\tupperIndex = upperIndex === -1 ? upperIndex = harmonics.length : upperIndex\n\n\t\tconst notes = harmonics.slice(lowerIndex, upperIndex)\n\n\t\tthis._samples = {}\n\n\t\tfor (let n of notes){\n\t\t\tthis._samples[n] = Salamander.getHarmonicsUrl(n)\n\t\t}\n\t}\n\n\tstart(note, time, velocity){\n\t\tthis._sampler.triggerAttack(midiToNote(note), time, velocity * randomBetween(0.5, 1))\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success, fail) => {\n\t\t\tthis._sampler = new Sampler(this._samples, success, baseUrl).connect(this.output)\n\t\t\tthis._sampler.release = 1\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Harmonics.js","import Tone, { Buffers , MultiSampler} from 'tone'\nimport Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {noteToMidi, createSource, midiToNote, midiToFrequencyRatio} from './Util'\n\n/**\n * Maps velocity depths to Salamander velocities\n */\nconst velocitiesMap = {\n\t1  : [8],\n\t2  : [6, 12],\n\t3  : [1, 8, 15],\n\t4  : [1, 5, 10, 15],\n\t5  : [1, 4, 8, 12, 16],\n\t6  : [1, 3, 7, 10, 13, 16],\n\t7  : [1, 3, 6, 9, 11, 13, 16],\n\t8  : [1, 3, 5, 7, 9, 11, 13, 15],\n\t9  : [1, 3, 5, 7, 9, 11, 13, 15, 16],\n\t10 : [1, 2, 3, 5, 7, 9, 11, 13, 15, 16],\n\t11 : [1, 2, 3, 5, 7, 9, 11, 13, 14, 15, 16],\n\t12 : [1, 2, 3, 4, 5, 7, 9, 11, 13, 14, 15, 16],\n\t13 : [1, 2, 3, 4, 5, 7, 9, 11, 12, 13, 14, 15, 16],\n\t14 : [1, 2, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16],\n\t15 : [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16],\n\t16 : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],\n}\n\nconst notes = [21, 24, 27, 30, 33, 36, 39, 42, 45, 48, 51, 54, 57, 60, 63, 66, 69, 72, 75, 78, 81, 84, 87, 90, 93, 96, 99, 102, 105, 108]\n\n/**\n *  Manages all of the hammered string sounds\n */\nexport class Notes extends PianoBase {\n\n\tconstructor(range=[21, 108], velocities=1){\n\t\tsuper()\n\n\t\tconst lowerIndex = notes.findIndex((note) => note >= range[0])\n\t\tlet upperIndex = notes.findIndex((note) => note >= range[1])\n\t\tupperIndex = upperIndex === -1 ? upperIndex = notes.length : upperIndex + 1\n\n\t\tconst slicedNotes = notes.slice(lowerIndex, upperIndex)\n\n\t\tthis._samplers = velocitiesMap[velocities].slice()\n\n\t\tthis._activeNotes = new Map()\n\n\t\tthis._samplers.forEach((vel, i) => {\n\t\t\tthis._samplers[i] = {}\n\t\t\tslicedNotes.forEach((note) => {\n\t\t\t\tthis._samplers[i][note] = Salamander.getNotesUrl(note, vel)\n\t\t\t})\n\t\t})\n\t}\n\n\t_hasNote(note, velocity){\n\t\treturn this._samplers.hasOwnProperty(velocity) && this._samplers[velocity].has(note)\n\t}\n\n\t_getNote(note, velocity){\n\t\treturn this._samplers[velocity].get(note)\n\t}\n\n\tstop(note, time, velocity){\n\t\t//stop all of the currently playing note\n\t\tif (this._activeNotes.has(note)){\n\t\t\tthis._activeNotes.get(note).forEach(source => {\n\t\t\t\tconst release = 0.25\n\t\t\t\tsource.stop(time + release, release)\n\t\t\t})\n\t\t\tthis._activeNotes.delete(note)\n\t\t}\n\t}\n\n\tstart(note, time, velocity){\n\n\t\tconst velPos = velocity * (this._samplers.length - 1)\n\t\tconst roundedVel = Math.round(velPos)\n\t\tconst diff = roundedVel - velPos\n\t\tconst gain = 1 - diff * 0.5\n\n\t\tlet [midi, ratio] = midiToFrequencyRatio(note)\n\n\t\tif (this._hasNote(midi, roundedVel)){\n\t\t\tconst source = createSource(this._getNote(midi, roundedVel))\n\t\t\tsource.playbackRate.value = ratio\n\t\t\tsource.connect(this.output)\n\t\t\tsource.start(time, 0, undefined, gain, 0)\n\n\t\t\tif (!this._activeNotes.has(note)){\n\t\t\t\tthis._activeNotes.set(note, [])\n\t\t\t}\n\t\t\tthis._activeNotes.get(note).push(source)\n\t\t}\n\t}\n\n\tload(baseUrl){\n\t\tconst promises = []\n\t\tthis._samplers.forEach((obj, i) => {\n\t\t\tlet prom = new Promise((success) => {\n\t\t\t\tthis._samplers[i] = new Buffers(obj, success, baseUrl)\n\t\t\t})\n\t\t\tpromises.push(prom)\n\t\t})\n\t\treturn Promise.all(promises)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Notes.js","import PianoBase from './PianoBase'\nimport Salamander from './Salamander'\nimport {createSource, randomBetween} from './Util'\nimport Tone, {Buffers} from 'tone'\n\nexport default class Pedal extends PianoBase {\n\tconstructor(){\n\t\tsuper()\n\n\t\tthis._downTime = Infinity\n\n\t\tthis._currentSound = null\n\n\t\tthis._buffers = null\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success) => {\n\t\t\tthis._buffers = new Buffers({\n\t\t\t\tup : 'pedalU1.mp3',\n\t\t\t\tdown : 'pedalD1.mp3'\n\t\t\t}, success, baseUrl)\n\t\t})\n\t}\n\n\t/**\n\t *  Squash the current playing sound\n\t */\n\t_squash(time){\n\t\tif (this._currentSound){\n\t\t\tthis._currentSound.stop(time, 0.1)\n\t\t}\n\t\tthis._currentSound = null\n\t}\n\n\t_playSample(time, dir){\n\t\tthis._currentSound = createSource(this._buffers.get(dir))\n\t\tthis._currentSound.connect(this.output).start(time, randomBetween(0, 0.1), undefined, 0.2 * randomBetween(0.5, 1), 0.05)\n\t}\n\n\tdown(time){\n\t\tthis._squash(time)\n\t\tthis._downTime = time\n\t\tthis._playSample(time, 'down')\n\t}\n\n\tup(time){\n\t\tthis._squash(time)\n\t\tthis._downTime = Infinity\n\t\tthis._playSample(time, 'up')\n\t}\n\n\tisDown(time){\n\t\treturn time > this._downTime\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Pedal.js","import Salamander from './Salamander'\nimport PianoBase from './PianoBase'\nimport {createSource, randomBetween} from './Util'\nimport { Buffers } from 'tone'\n\nexport default class Release extends PianoBase {\n\n\tconstructor(range){\n\t\tsuper()\n\n\t\tthis._buffers = {}\n\t\tfor (let i = range[0]; i <= range[1]; i++){\n\t\t\tthis._buffers[i] = Salamander.getReleasesUrl(i)\n\t\t}\n\t}\n\n\tload(baseUrl){\n\t\treturn new Promise((success) => {\n\t\t\tthis._buffers = new Buffers(this._buffers, success, baseUrl)\n\t\t})\n\t}\n\n\tstart(note, time, velocity){\n\t\tif (this._buffers.has(note)){\n\t\t\tlet source = createSource(this._buffers.get(note)).connect(this.output)\n\t\t\t//randomize the velocity slightly\n\t\t\tvelocity *= randomBetween(0.5, 1)\n\t\t\tsource.start(time, 0, undefined, 0.01 * velocity, 0)\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Release.js","import Tone, { Gain, Frequency, AudioNode} from 'tone'\nimport Pedal from './Pedal'\nimport {Notes} from './Notes'\nimport Harmonics from './Harmonics'\nimport Release from './Release'\nimport Salamander from './Salamander'\n\n/**\n *  @class Multisampled Grand Piano using [Salamander Piano Samples](https://archive.org/details/SalamanderGrandPianoV3)\n *  @extends {Tone}\n */\nexport class Piano extends AudioNode {\n\n\tconstructor(){\n\n\t\tconst options = Tone.defaults(arguments, [\"range\", \"velocities\"], {\n\t\t\tvelocities : 1,\n\t\t\trange : [21, 108],\n\t\t\trelease : true\n\t\t});\n\n\t\tsuper()\n\t\tthis.createInsOuts(0, 1)\n\n\t\tthis._loaded = false\n\n\t\tthis._heldNotes = new Map()\n\n\t\tthis._sustainedNotes = new Map()\n\n\t\tthis._notes = new Notes(options.range, options.velocities).connect(this.output)\n\n\t\tthis._pedal = new Pedal().connect(this.output)\n\n\t\tif (options.release){\n\t\t\tthis._harmonics = new Harmonics(options.range).connect(this.output)\n\n\t\t\tthis._release = new Release(options.range).connect(this.output)\n\t\t}\n\t}\n\n\t/**\n\t *  Load all the samples\n\t *  @param  {String}  baseUrl  The url for the Salamander base folder\n\t *  @return  {Promise}\n\t */\n\tload(url){\n\t\tconst promises = [this._notes.load(url), this._pedal.load(url)]\n\t\tif (this._harmonics){\n\t\t\tpromises.push(this._harmonics.load(url))\n\t\t}\n\t\tif (this._release){\n\t\t\tpromises.push(this._release.load(url))\n\t\t}\n\t\treturn Promise.all(promises).then(() => {\n\t\t\tthis._loaded = true\n\t\t})\n\t}\n\n\t/**\n\t * If all the samples are loaded or not\n\t * @readOnly\n\t * @type {Boolean}\n\t */\n\tget loaded(){\n\t\treturn this._loaded\n\t}\n\n\t/**\n\t *  Put the pedal down at the given time. Causes subsequent\n\t *  notes and currently held notes to sustain.\n\t *  @param  {Time}  time  The time the pedal should go down\n\t *  @returns {Piano} this\n\t */\n\tpedalDown(time){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\t\t\tif (!this._pedal.isDown(time)){\n\t\t\t\tthis._pedal.down(time)\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Put the pedal up. Dampens sustained notes\n\t *  @param  {Time}  time  The time the pedal should go up\n\t *  @returns {Piano} this\n\t */\n\tpedalUp(time){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\t\t\tif (this._pedal.isDown(time)){\n\t\t\t\tthis._pedal.up(time)\n\t\t\t\t// dampen each of the notes\n\t\t\t\tthis._sustainedNotes.forEach((t, note) => {\n\t\t\t\t\tif (!this._heldNotes.has(note)){\n\t\t\t\t\t\tthis._notes.stop(note, time)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis._sustainedNotes.clear()\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Play a note.\n\t *  @param  {String|Number}  note      The note to play. If it is a number, it is assumed\n\t *                                     to be MIDI\n\t *  @param  {NormalRange}  velocity  The velocity to play the note\n\t *  @param  {Time}  time      The time of the event\n\t *  @return  {Piano}  this\n\t */\n\tkeyDown(note, time=Tone.now(), velocity=0.8){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\n\t\t\tif (Tone.isString(note)){\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\n\t\t\t}\n\n\t\t\tif (!this._heldNotes.has(note)){\n\t\t\t\t//record the start time and velocity\n\t\t\t\tthis._heldNotes.set(note, {time, velocity})\n\n\t\t\t\tthis._notes.start(note, time, velocity)\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Release a held note.\n\t *  @param  {String|Number}  note      The note to stop\n\t *  @param  {Time}  time      The time of the event\n\t *  @return  {Piano}  this\n\t */\n\tkeyUp(note, time=Tone.now(), velocity=0.8){\n\t\tif (this.loaded){\n\t\t\ttime = this.toSeconds(time)\n\n\t\t\tif (Tone.isString(note)){\n\t\t\t\tnote = Math.round(Frequency(note).toMidi())\n\t\t\t}\n\n\t\t\tif (this._heldNotes.has(note)){\n\n\t\t\t\tconst prevNote = this._heldNotes.get(note)\n\t\t\t\tthis._heldNotes.delete(note)\n\n\t\t\t\tif (this._release){\n\t\t\t\t\tthis._release.start(note, time, velocity)\n\t\t\t\t}\n\n\t\t\t\t//compute the release velocity\n\t\t\t\tconst holdTime = time - prevNote.time\n\t\t\t\tconst prevVel = prevNote.velocity\n\t\t\t\tlet dampenGain = (0.5/Math.max(holdTime, 0.1)) + prevVel + velocity\n\t\t\t\tdampenGain = Math.pow(Math.log(Math.max(dampenGain, 1)), 2) / 2\n\n\t\t\t\tif (this._pedal.isDown(time)){\n\t\t\t\t\tif (!this._sustainedNotes.has(note)){\n\t\t\t\t\t\tthis._sustainedNotes.set(note, time)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._notes.stop(note, time, velocity)\n\n\t\t\t\t\tif (this._harmonics){\n\t\t\t\t\t\tthis._harmonics.start(note, time, dampenGain)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this\n\t}\n\n\t/**\n\t *  Set the volumes of each of the components\n\t *  @param {String} param\n\t *  @param {Decibels} vol\n\t *  @return {Piano} this\n\t *  @example\n\t * //either as an string\n\t * piano.setVolume('release', -10)\n\t */\n\tsetVolume(param, vol){\n\t\tswitch(param){\n\t\t\tcase 'note':\n\t\t\t\tthis._notes.volume = vol\n\t\t\t\tbreak\n\t\t\tcase 'pedal':\n\t\t\t\tthis._pedal.volume = vol\n\t\t\t\tbreak\n\t\t\tcase 'release':\n\t\t\t\tif (this._release){\n\t\t\t\t\tthis._release.volume = vol\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\tcase 'harmonics':\n\t\t\t\tif (this._harmonics){\n\t\t\t\t\tthis._harmonics.volume = vol\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t\treturn this\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./Piano.js"],"sourceRoot":""}